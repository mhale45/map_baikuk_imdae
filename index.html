
    <!DOCTYPE html>
    <html lang="ko">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title></title>
        <script type="text/javascript" src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=f605c7b72dc7f3083f36483e55e2bc77&autoload=false"></script>
        <style>
            #map {
                width: 100%;
                height: 880px;
            }
            .info-window-one {
                font-size: 13px !important; /* 🔹 글자 크기 설정 */
                font-weight: 500 !important; /* 🔹 글자 굵게 설정 */
                background: rgba(255, 255, 255, 1); !important;
                padding: 5px !important; /* 🔹 내부 여백 설정 */
                max-width: 600px !important; /* 🔹 최대 너비 설정 */
                word-wrap: break-word !important; /* 🔹 긴 단어가 있으면 자동으로 줄바꿈 */
                overflow-wrap: break-word !important; /* 🔹 공백이 없어도 강제 줄바꿈 */
                overflow-x: auto !important; /* 🔹 가로 스크롤 */
                white-space: nowrap !important; /* 🔹 자동 줄바꿈 방지 (공백이 있어도 줄바꿈되지 않음) */
                text-align: left !important; /* 🔹 텍스트 정렬을 왼쪽으로 설정 */
                pointer-events: none !important; /* 터치 및 클릭 비활성화 */
                border-radius: 5px;
                border: none !important; /* ✅ 테두리 제거 */
                box-border: none !important; /* ✅ 테두리 제거 */
                box-border: none !important; /* ✅ 그림자 제거 */
                box-shadow: none !important; /* ✅ 그림자 제거 */
            }
            .info-window-one::after, .info-window-one::before{
                content: none !important; /* ✅ 삼각형을 완전히 제거 */
                display: none !important;
                box-border: none !important; /* ✅ 그림자 제거 */
            }
            .info-window-many {
                font-size: 14px !important; /* 🔹 글자 크기 설정 */
                font-weight: 500 !important; /* 🔹 글자 굵게 설정 */
                background-color: white !important; /* 🔹 배경 색상을 흰색으로 설정 */
                padding: 5px !important; /* 🔹 내부 여백 설정 */
                border-radius: 5px !important; /* 🔹 박스 테두리를 둥글게 만듦 */
                line-height: 2 !important; /* 🔹 줄 간격 조정 */
                max-width: 600px !important; /* 🔹 최대 너비 설정 */
                max-height: 600px !important; /* 🔹 최대 높이 설정 */
                white-space: nowrap !important; /* 🔹 자동 줄바꿈 
                overflow-x: auto !important; /* 🔹 가로 스크롤 제거 */
                overflow-y: auto !important; /* 🔹 내용이 많으면 세로 스크롤 생성 */                
                border: 3px solid black !important; /* 🔹 두께 3px, 검정색 테두리 */
                box-shadow: 3px 3px 10px rgba(0, 0, 0, 0.2) !important; /* 🔹 그림자 추가 */
            }
            .custom-overlay {
                position: absolute;
                bottom: 1px; /* ✅ 오버레이 위치 조정 */
                left: calc(50% + 60px);
                transform: translateX(-50%);
                background: rgba(255, 255, 255, 1);
                border-radius: 5px;
                font-size: 13px;
                white-space: nowrap;
                text-align: center;
                border: 1px solid black !important;
                user-select: text;
                cursor: pointer;
                box-shadow: none !important; /* ✅ 그림자 제거 */                
                padding: 1px !important; /* 🔹 내부 여백 설정 */
                font-weight: 500 !important; /* 🔹 글자 굵게 설정 */
            }
            .custom-overlay::after {
                content: none !important; /* ✅ 삼각형 제거 */
                display: none !important;
                border: none !important; /* ✅ 테두리 제거 */
            }
            /* 📌 버튼 스타일 */
            #openInitialInfoWindows, #closeAllInfoWindows, #toggleSearch, #applyDepositFilter, #filterSearch{
                position: absolute; 
                right: 20px; 
                padding: 10px 15px; 
                border: none; 
                border-radius: 5px; 
                font-weight: bold; 
                cursor: pointer;
                width: auto;
                box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.2);
                z-index: 1000;
            }
            #filter-container {
                position: absolute;
                top: 200px;
                right: 20px;
                display: flex;
                flex-direction: column; /* 세로 배치 */
                gap: 1px;  /* 🔹 입력창 사이 간격 설정 */
                background: white;
                padding: 10px;
                border-radius: 8px;
                box-shadow: 2px 2px 10px rgba(0, 0, 0, 0.2);
                z-index: 1000;
            }
            #filter-label {
                font-size: 16px;
                font-weight: bold;
                margin-bottom: 5px;
                text-align: center;
            }
            #minDepositInput, #maxDepositInput,
            #minRentInput, #maxRentInput,
            # minRightInput, # maxRightInput,
            # minAreaInput, #maxAreaInput,
            # minFloorInput, #maxFloorInput {
                width: 120px;
                padding: 7px;
                margin: 8px 0;
                border: 1px solid #ccc;
                border-radius: 5px;
            }
            /* 📌 "필터 적용" 버튼 (회색) */
            #applyDepositFilter {
                bottom: 140px; 
                background-color: #696969;
                color: white;
            }
            /* 📌 "필터창" 버튼 (파란색) */
            #filterSearch {
                bottom: 20px; 
                right: 100px;
                background-color: #007bff;
                color: white;
            }
            /* 📌 "검색창" 버튼 (파란색) */
            #toggleSearch {
                bottom: 20px; 
                background-color: #007bff;
                color: white;
            }
            /* 📌 "텍스트 열기" 버튼 (초록색) */
            #openInitialInfoWindows {
                bottom: 100px; /* 닫기 버튼 위에 위치 */
                background-color: #4CAF50;
                color: white;
            }
            /* 📌 "텍스트 닫기" 버튼 (빨간색) */
            #closeAllInfoWindows {
                bottom: 60px; 
                background-color: #ff5555;
                color: white;
            }
            /* 검색창 스타일 */
            #search-container {
                position: absolute;
                top: 60px;
                right: 10px;
                background: white;
                padding: 8px;
                border-radius: 5px;
                box-shadow: 0px 0px 5px rgba(0, 0, 0, 0.2);
                z-index: 1000;
                display: none;
            }
            /* 검색 결과 스타일 */
            #searchResults {
                overflow-y: auto;   /* ✅ 스크롤 가능하도록 설정 */
                background: white;
                padding: 8px;
                border-radius: 5px;
                box-shadow: 0px 0px 5px rgba(0, 0, 0, 0.2);
                resize: vertical; /* ✅ 마우스로 세로 크기 조절 가능 */
                min-height: 10px; /* ✅ 최소 높이 제한 (사용자가 너무 작게 줄이지 못하도록) */
                max-height: 500px; /* ✅ 최대 높이 제한 */
            }
            /* 검색 결과 버튼 스타일 */
            .search-result-item {
                display: block;
                width: 100%;
                margin-top: 5px;
                padding: 5px;
                background: #007bff;
                color: white;
                border: none;
                border-radius: 3px;
                cursor: pointer;
                text-align: left;
            }
            .search-result-item:hover {
                background: #0056b3;
            }

        </style>
    </head>
    <body>
        <!-- 📌 비밀번호 입력 창 -->
        <div id="password-container" style="
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 20px;
            border-radius: 5px;
            box-shadow: 0px 2px 5px rgba(0, 0, 0, 0.2);
            text-align: center;
            z-index: 1000;">
            <h3>비밀번호 입력</h3>
            <input type="password" id="passwordInput" placeholder="비밀번호 입력" style="padding: 5px;">
            <button onclick="checkPassword()" style="padding: 5px; cursor: pointer;">확인</button>
            <p id="errorMessage" style="color: red; display: none;">비밀번호가 틀렸습니다!</p>
        </div>
        
        <!-- 📌 지도 및 UI (비밀번호 입력 후 표시됨) -->
        <div id="map-container" style="display: none;">
            <h2></h2>
            <div id="map"></div>
            <div id="filter-container">
                <label id="filter-label">보증금</label>
                <input type="number" id="minDepositInput" placeholder="최소">
                <input type="number" id="maxDepositInput" placeholder="최대">
                <label id="filter-label">월세</label>
                <input type="number" id="minRentInput" placeholder="최소">
                <input type="number" id="maxRentInput" placeholder="최대">
                <label id="filter-label">권리금</label>
                <input type="number" id="minRightInput" placeholder="최소">
                <input type="number" id="maxRightInput" placeholder="최대">
                <label id="filter-label">면적</label>
                <input type="number" id="minAreaInput" placeholder="최소">
                <input type="number" id="maxAreaInput" placeholder="최대">
                <label id="filter-label">층</label>
                <input type="number" id="minFloorInput" placeholder="최소">
                <input type="number" id="maxFloorInput" placeholder="최대">
            </div>
            <button id="applyDepositFilter">필터 적용</button> <!-- 📌 "텍스트 열기" 버튼 -->
            <button id="openInitialInfoWindows">텍스트 열기</button> <!-- 📌 "텍스트 열기" 버튼 -->
            <button id="closeAllInfoWindows">텍스트 닫기</button> <!-- 📌 "텍스트 닫기" 버튼 -->
            <button id="toggleSearch">검색창</button>
            <button id="filterSearch">필터창</button>
            <!-- 📌 검색창 -->
            <div id="search-container" style="
                position: absolute; 
                top: 60px; 
                right: 20px; 
                background: white; 
                padding: 10px; 
                border-radius: 5px; 
                box-shadow: 0px 2px 5px rgba(0, 0, 0, 0.2);
                z-index: 1000;">
                <input type="text" id="searchInput" placeholder="검색어 입력" style="padding: 5px; width: 150px;">
                <button id="searchButton" style="padding: 5px; cursor: pointer;">🔍 검색</button>
                <div id="searchResults" style="margin-top: 5px;"></div>
            </div>
        </div>
    </body>
    </html>
        <script>
            function checkPassword() {
                var correctPassword = "2834"; // ✅ 원하는 비밀번호 설정
                var userInput = document.getElementById("passwordInput").value;
                var errorMessage = document.getElementById("errorMessage");

                if (userInput === correctPassword) {
                    document.getElementById("password-container").style.display = "none";
                    document.getElementById("map-container").style.display = "block";
                    document.getElementById("search-container").style.display = "block";
                    document.getElementById("applyDepositFilter").style.display = "block"; 
                    document.getElementById("openInitialInfoWindows").style.display = "block"; 
                    document.getElementById("closeAllInfoWindows").style.display = "block"; 
                    loadMap(); // ✅ 지도 로드
                } else {
                    errorMessage.style.display = "block";
                }
            }

            // 비밀번호 입력 필드 자동 포커스
            document.getElementById("passwordInput").focus();

            // ✅ Enter 키로도 비밀번호 입력 가능하게 이벤트 추가
            document.getElementById("passwordInput").addEventListener("keypress", function(event) {
                if (event.key === "Enter") {
                    checkPassword();  // 엔터를 누르면 checkPassword 실행
                }
            });

            function loadMap() {
                if (typeof kakao !== "undefined") {
                    kakao.maps.load(function() {
                        var container = document.getElementById('map');
                        var options = {
                            center: new kakao.maps.LatLng(37.697248, 126.760244),
                            level: 3
                        };
                        var map = new kakao.maps.Map(container, options);

                        var markers = [];  
                        var infoWindows = [];  
                        var overlays = []; 
                        var isOpenStates = [];  
                        var initialOpenStates = [];
                        var titles = [];               

                        var markerImageSize = new kakao.maps.Size(38, 38);
                        var markerImageOptions = { offset: new kakao.maps.Point(14, 14) };
                        var markerImageOne = new kakao.maps.MarkerImage("https://raw.githubusercontent.com/mhale45/image/main/2.png", markerImageSize, markerImageOptions);
                        var markerImageMany = new kakao.maps.MarkerImage("https://raw.githubusercontent.com/mhale45/image/main/5-1.png", markerImageSize, markerImageOptions);

                        
            var line_count = 1; 
            var isOpen = Boolean(line_count <= 1);  // ✅ 정확한 boolean 값 변환
            var markerImage = isOpen ? markerImageOne : markerImageMany;
            var infoWindowClass = isOpen ? "info-window-one" : "info-window-many"; // ✅ 클래스 설정

            // ✅ 마커 생성 후 배열에 저장
            var marker = new kakao.maps.Marker({ 
                position: new kakao.maps.LatLng(0.0, 0.0), 
                map: map,
                image: markerImage
            });
            markers.push(marker);

            // ✅ InfoWindow 생성 후 배열에 저장
            var infowindow = new kakao.maps.InfoWindow({
                content: `<div class="${infoWindowClass}"> 20687 1F  공실 (건물전체) 199.0평 30,000/1,300 권 0 (6.5) </div>`, 
                removable: false 
            });
            infoWindows.push(infowindow);

            var overlayContent = `<div class="custom-overlay">경기 - - 1584-1</div>`;
            var overlay = new kakao.maps.CustomOverlay({
                content: overlayContent,
                position: marker.getPosition(),
                yAnchor: -1,
                map: null // ✅ 처음에는 보이지 않도록 설정
            });
            overlays.push(overlay);

            isOpenStates.push(isOpen);
            initialOpenStates.push(isOpen);  // ✅ 초기 상태를 별도로 저장
            titles.push("공실 (건물전체)");  // ✅ 제목 추가
        
            var line_count = 1; 
            var isOpen = Boolean(line_count <= 1);  // ✅ 정확한 boolean 값 변환
            var markerImage = isOpen ? markerImageOne : markerImageMany;
            var infoWindowClass = isOpen ? "info-window-one" : "info-window-many"; // ✅ 클래스 설정

            // ✅ 마커 생성 후 배열에 저장
            var marker = new kakao.maps.Marker({ 
                position: new kakao.maps.LatLng(0.0, 0.0), 
                map: map,
                image: markerImage
            });
            markers.push(marker);

            // ✅ InfoWindow 생성 후 배열에 저장
            var infowindow = new kakao.maps.InfoWindow({
                content: `<div class="${infoWindowClass}"> 21882 1F  설래옥(카페) 23.0평 1,350/81 권 800 (3.6) </div>`, 
                removable: false 
            });
            infoWindows.push(infowindow);

            var overlayContent = `<div class="custom-overlay">경기 - - 1682</div>`;
            var overlay = new kakao.maps.CustomOverlay({
                content: overlayContent,
                position: marker.getPosition(),
                yAnchor: -1,
                map: null // ✅ 처음에는 보이지 않도록 설정
            });
            overlays.push(overlay);

            isOpenStates.push(isOpen);
            initialOpenStates.push(isOpen);  // ✅ 초기 상태를 별도로 저장
            titles.push("설래옥(카페)");  // ✅ 제목 추가
        
            var line_count = 1; 
            var isOpen = Boolean(line_count <= 1);  // ✅ 정확한 boolean 값 변환
            var markerImage = isOpen ? markerImageOne : markerImageMany;
            var infoWindowClass = isOpen ? "info-window-one" : "info-window-many"; // ✅ 클래스 설정

            // ✅ 마커 생성 후 배열에 저장
            var marker = new kakao.maps.Marker({ 
                position: new kakao.maps.LatLng(0.0, 0.0), 
                map: map,
                image: markerImage
            });
            markers.push(marker);

            // ✅ InfoWindow 생성 후 배열에 저장
            var infowindow = new kakao.maps.InfoWindow({
                content: `<div class="${infoWindowClass}"> 13529 4F  공실( 더지음스퀘어 401호) 23.0평 2,500/140 권 0 (6.1) </div>`, 
                removable: false 
            });
            infoWindows.push(infowindow);

            var overlayContent = `<div class="custom-overlay">경기 - - 2079-3</div>`;
            var overlay = new kakao.maps.CustomOverlay({
                content: overlayContent,
                position: marker.getPosition(),
                yAnchor: -1,
                map: null // ✅ 처음에는 보이지 않도록 설정
            });
            overlays.push(overlay);

            isOpenStates.push(isOpen);
            initialOpenStates.push(isOpen);  // ✅ 초기 상태를 별도로 저장
            titles.push("공실( 더지음스퀘어 401호)");  // ✅ 제목 추가
        
            var line_count = 1; 
            var isOpen = Boolean(line_count <= 1);  // ✅ 정확한 boolean 값 변환
            var markerImage = isOpen ? markerImageOne : markerImageMany;
            var infoWindowClass = isOpen ? "info-window-one" : "info-window-many"; // ✅ 클래스 설정

            // ✅ 마커 생성 후 배열에 저장
            var marker = new kakao.maps.Marker({ 
                position: new kakao.maps.LatLng(37.6304140987151, 126.796580717723), 
                map: map,
                image: markerImage
            });
            markers.push(marker);

            // ✅ InfoWindow 생성 후 배열에 저장
            var infowindow = new kakao.maps.InfoWindow({
                content: `<div class="${infoWindowClass}"> 16645 1F  장어일번지 78.0평 10,000/450 권 14,000 (5.8) </div>`, 
                removable: false 
            });
            infoWindows.push(infowindow);

            var overlayContent = `<div class="custom-overlay">내곡동 485-12</div>`;
            var overlay = new kakao.maps.CustomOverlay({
                content: overlayContent,
                position: marker.getPosition(),
                yAnchor: -1,
                map: null // ✅ 처음에는 보이지 않도록 설정
            });
            overlays.push(overlay);

            isOpenStates.push(isOpen);
            initialOpenStates.push(isOpen);  // ✅ 초기 상태를 별도로 저장
            titles.push("장어일번지");  // ✅ 제목 추가
        
            var line_count = 1; 
            var isOpen = Boolean(line_count <= 1);  // ✅ 정확한 boolean 값 변환
            var markerImage = isOpen ? markerImageOne : markerImageMany;
            var infoWindowClass = isOpen ? "info-window-one" : "info-window-many"; // ✅ 클래스 설정

            // ✅ 마커 생성 후 배열에 저장
            var marker = new kakao.maps.Marker({ 
                position: new kakao.maps.LatLng(37.7091341188033, 126.854251606336), 
                map: map,
                image: markerImage
            });
            markers.push(marker);

            // ✅ InfoWindow 생성 후 배열에 저장
            var infowindow = new kakao.maps.InfoWindow({
                content: `<div class="${infoWindowClass}"> 17708 1F  유로 커피머신 (청담프라자 102호) 15.0평 2,000/130 권 1,500 (8.7) </div>`, 
                removable: false 
            });
            infoWindows.push(infowindow);

            var overlayContent = `<div class="custom-overlay">관산동 672-80</div>`;
            var overlay = new kakao.maps.CustomOverlay({
                content: overlayContent,
                position: marker.getPosition(),
                yAnchor: -1,
                map: null // ✅ 처음에는 보이지 않도록 설정
            });
            overlays.push(overlay);

            isOpenStates.push(isOpen);
            initialOpenStates.push(isOpen);  // ✅ 초기 상태를 별도로 저장
            titles.push("유로 커피머신 (청담프라자 102호)");  // ✅ 제목 추가
        
            var line_count = 1; 
            var isOpen = Boolean(line_count <= 1);  // ✅ 정확한 boolean 값 변환
            var markerImage = isOpen ? markerImageOne : markerImageMany;
            var infoWindowClass = isOpen ? "info-window-one" : "info-window-many"; // ✅ 클래스 설정

            // ✅ 마커 생성 후 배열에 저장
            var marker = new kakao.maps.Marker({ 
                position: new kakao.maps.LatLng(37.7089389451553, 126.85452495748), 
                map: map,
                image: markerImage
            });
            markers.push(marker);

            // ✅ InfoWindow 생성 후 배열에 저장
            var infowindow = new kakao.maps.InfoWindow({
                content: `<div class="${infoWindowClass}"> 17741 1F  베로스트커피 (더파라곤 105,106호) 21.0평 3,000/160 권 4,000 (7.7) </div>`, 
                removable: false 
            });
            infoWindows.push(infowindow);

            var overlayContent = `<div class="custom-overlay">관산동 672-47</div>`;
            var overlay = new kakao.maps.CustomOverlay({
                content: overlayContent,
                position: marker.getPosition(),
                yAnchor: -1,
                map: null // ✅ 처음에는 보이지 않도록 설정
            });
            overlays.push(overlay);

            isOpenStates.push(isOpen);
            initialOpenStates.push(isOpen);  // ✅ 초기 상태를 별도로 저장
            titles.push("베로스트커피 (더파라곤 105,106호)");  // ✅ 제목 추가
        
            var line_count = 1; 
            var isOpen = Boolean(line_count <= 1);  // ✅ 정확한 boolean 값 변환
            var markerImage = isOpen ? markerImageOne : markerImageMany;
            var infoWindowClass = isOpen ? "info-window-one" : "info-window-many"; // ✅ 클래스 설정

            // ✅ 마커 생성 후 배열에 저장
            var marker = new kakao.maps.Marker({ 
                position: new kakao.maps.LatLng(37.7066675084235, 126.868815998538), 
                map: map,
                image: markerImage
            });
            markers.push(marker);

            // ✅ InfoWindow 생성 후 배열에 저장
            var infowindow = new kakao.maps.InfoWindow({
                content: `<div class="${infoWindowClass}"> 10959   창고 5개동 70.0평 14,000/870 권 0 (12.5) </div>`, 
                removable: false 
            });
            infoWindows.push(infowindow);

            var overlayContent = `<div class="custom-overlay">관산동 18</div>`;
            var overlay = new kakao.maps.CustomOverlay({
                content: overlayContent,
                position: marker.getPosition(),
                yAnchor: -1,
                map: null // ✅ 처음에는 보이지 않도록 설정
            });
            overlays.push(overlay);

            isOpenStates.push(isOpen);
            initialOpenStates.push(isOpen);  // ✅ 초기 상태를 별도로 저장
            titles.push("창고 5개동");  // ✅ 제목 추가
        
            var line_count = 1; 
            var isOpen = Boolean(line_count <= 1);  // ✅ 정확한 boolean 값 변환
            var markerImage = isOpen ? markerImageOne : markerImageMany;
            var infoWindowClass = isOpen ? "info-window-one" : "info-window-many"; // ✅ 클래스 설정

            // ✅ 마커 생성 후 배열에 저장
            var marker = new kakao.maps.Marker({ 
                position: new kakao.maps.LatLng(37.7027876069548, 126.902506830356), 
                map: map,
                image: markerImage
            });
            markers.push(marker);

            // ✅ InfoWindow 생성 후 배열에 저장
            var infowindow = new kakao.maps.InfoWindow({
                content: `<div class="${infoWindowClass}"> 17733 -1F  공실  (구.이마트에브리데이 고양2호점) 163.0평 5,000/330 권 30,000 (2.0) </div>`, 
                removable: false 
            });
            infoWindows.push(infowindow);

            var overlayContent = `<div class="custom-overlay">고양동 197</div>`;
            var overlay = new kakao.maps.CustomOverlay({
                content: overlayContent,
                position: marker.getPosition(),
                yAnchor: -1,
                map: null // ✅ 처음에는 보이지 않도록 설정
            });
            overlays.push(overlay);

            isOpenStates.push(isOpen);
            initialOpenStates.push(isOpen);  // ✅ 초기 상태를 별도로 저장
            titles.push("공실  (구.이마트에브리데이 고양2호점)");  // ✅ 제목 추가
        
            var line_count = 1; 
            var isOpen = Boolean(line_count <= 1);  // ✅ 정확한 boolean 값 변환
            var markerImage = isOpen ? markerImageOne : markerImageMany;
            var infoWindowClass = isOpen ? "info-window-one" : "info-window-many"; // ✅ 클래스 설정

            // ✅ 마커 생성 후 배열에 저장
            var marker = new kakao.maps.Marker({ 
                position: new kakao.maps.LatLng(37.7099509382004, 126.90376886225), 
                map: map,
                image: markerImage
            });
            markers.push(marker);

            // ✅ InfoWindow 생성 후 배열에 저장
            var infowindow = new kakao.maps.InfoWindow({
                content: `<div class="${infoWindowClass}"> 22270 1F  공실(1층 전체 1~7호) 193.0평 50,000/2,550 권 0 (13.2) </div>`, 
                removable: false 
            });
            infoWindows.push(infowindow);

            var overlayContent = `<div class="custom-overlay">고양동 1132-23</div>`;
            var overlay = new kakao.maps.CustomOverlay({
                content: overlayContent,
                position: marker.getPosition(),
                yAnchor: -1,
                map: null // ✅ 처음에는 보이지 않도록 설정
            });
            overlays.push(overlay);

            isOpenStates.push(isOpen);
            initialOpenStates.push(isOpen);  // ✅ 초기 상태를 별도로 저장
            titles.push("공실(1층 전체 1~7호)");  // ✅ 제목 추가
        
            var line_count = 1; 
            var isOpen = Boolean(line_count <= 1);  // ✅ 정확한 boolean 값 변환
            var markerImage = isOpen ? markerImageOne : markerImageMany;
            var infoWindowClass = isOpen ? "info-window-one" : "info-window-many"; // ✅ 클래스 설정

            // ✅ 마커 생성 후 배열에 저장
            var marker = new kakao.maps.Marker({ 
                position: new kakao.maps.LatLng(37.4861296388207, 127.989091969271), 
                map: map,
                image: markerImage
            });
            markers.push(marker);

            // ✅ InfoWindow 생성 후 배열에 저장
            var infowindow = new kakao.maps.InfoWindow({
                content: `<div class="${infoWindowClass}"> 17080 1F  횡성한우직판장 120.0평 2,000/200 권 60,000 (1.7) </div>`, 
                removable: false 
            });
            infoWindows.push(infowindow);

            var overlayContent = `<div class="custom-overlay">읍상리 472</div>`;
            var overlay = new kakao.maps.CustomOverlay({
                content: overlayContent,
                position: marker.getPosition(),
                yAnchor: -1,
                map: null // ✅ 처음에는 보이지 않도록 설정
            });
            overlays.push(overlay);

            isOpenStates.push(isOpen);
            initialOpenStates.push(isOpen);  // ✅ 초기 상태를 별도로 저장
            titles.push("횡성한우직판장");  // ✅ 제목 추가
          

                        map.setCenter(new kakao.maps.LatLng(37.697248, 126.760244));
                        map.setLevel(3);  // 숫자가 작을수록 확대

                        markers.forEach((marker, index) => {
                            // ✅ 오버레이 HTML 생성 (마커 아래쪽에 위치)
                            var overlayContent = `<div class="custom-overlay">$읍상리 472</div>`;

                            var overlay = new kakao.maps.CustomOverlay({
                                content: overlayContent,
                                position: marker.getPosition()
                            });

                            overlays.push(overlay);
                            isOpenStates.push(false);
                            initialOpenStates.push(false);

                            kakao.maps.event.addListener(marker, 'click', function() {
                                if (isOpenStates[index]) {
                                    infoWindows[index].close();
                                    overlays[index].setMap(null);
                                    isOpenStates[index] = false;
                                } else {
                                    infoWindows[index].open(map, marker);
                                    overlays[index].setMap(map);
                                    isOpenStates[index] = true;
                                }
                            });
                        });

                        document.getElementById("closeAllInfoWindows").addEventListener("click", function() {
                            infoWindows.forEach((infoWindow, index) => {
                                infoWindow.close();
                                isOpenStates[index] = false;
                            });
                            overlays.forEach((overlay, index) => {
                                overlay.setMap(null);
                                isOpenStates[index] = false;
                            });
                        });

                        document.getElementById("openInitialInfoWindows").addEventListener("click", function() {                            
                            lastCenter = map.getCenter();
                            lastLevel = map.getLevel();    

                            let bounds = map.getBounds();  // ✅ 현재 지도의 범위를 가져옴

                            for (let i = 0; i < markers.length; i++) {
                                if (bounds.contain(markers[i].getPosition())) {  // ✅ 현재 지도 범위 안에 있는 마커인지 확인
                                    if (initialOpenStates[i]) {
                                        infoWindows[i].open(map, markers[i]);  // ✅ 현재 보이는 마커만 열기
                                        isOpenStates[i] = true;  
                                    }
                                }
                            }

                            // ✅ 지도 위치를 복원
                            if (lastCenter !== null && lastLevel !== null) {
                                map.setCenter(lastCenter);
                                map.setLevel(lastLevel);
                            }
                        });
                        

                        document.getElementById("searchButton").addEventListener("click", searchInfoWindows);
                        document.getElementById("searchInput").addEventListener("keypress", function(event) {
                            if (event.key === "Enter") {
                                searchInfoWindows();
                            }
                        });

                        function searchInfoWindows() {
                            var keyword = document.getElementById("searchInput").value.trim();
                            var resultsDiv = document.getElementById("searchResults");
                            resultsDiv.innerHTML = "";

                            if (keyword === "") {
                                resultsDiv.innerHTML = "<p style='color: red;'>검색어를 입력하세요!</p>";
                                return;
                            }

                            var results = [];
                            
                            infoWindows.forEach((infoWindow, index) => {
                                var content = infoWindow.getContent();
                                if (content.includes(keyword)) {
                                    results.push({ index: index, content: content, title: titles[index] });
                                }
                            });

                            if (results.length === 0) {
                                resultsDiv.innerHTML = "<p style='color: red;'>검색 결과가 없습니다.</p>";
                            } else {
                                results.forEach(result => {
                                    var button = document.createElement("button");
                                    button.innerHTML = `${result.title}`;
                                    button.style = "display: block; margin-top: 5px; padding: 5px; cursor: pointer;";
                                    button.addEventListener("click", function() {
                                        var marker = markers[result.index];
                                        var infoWindow = infoWindows[result.index];
                                        var overlay = overlays[result.index];

                                        map.setCenter(marker.getPosition());
                                        map.setLevel(3); 

                                        infoWindows.forEach((iw) => iw.close()); // ✅ 모든 InfoWindow 닫기
                                        overlays.forEach(ov => ov.setMap(null));

                                        infoWindow.open(map, marker); 
                                        overlay.setMap(map);

                                    });

                                    resultsDiv.appendChild(button);
                                });
                            }
                        }

                        document.addEventListener("click", function (event) {
                            // 클릭된 요소가 .custom-overlay 클래스인지 확인
                            if (event.target.classList.contains("custom-overlay")) {
                                var textToCopy = event.target.textContent.trim();

                                navigator.clipboard.writeText(textToCopy).then(() => {
                                    showCopyMessage(event.target);
                                }).catch(err => {
                                    console.error("클립보드 복사 실패: ", err);
                                });
                            }
                        });

                        // ✅ 복사 완료 메시지를 표시하는 함수
                        function showCopyMessage(target) {
                            // 기존 메시지가 있으면 삭제
                            let existingMsg = target.querySelector(".copy-message");
                            if (existingMsg) {
                                existingMsg.remove();
                            }

                            // 메시지 생성
                            let message = document.createElement("div");
                            message.classList.add("copy-message");
                            message.textContent = "📋 복사됨!";
                            
                            // 스타일 설정
                            message.style.position = "absolute";
                            message.style.bottom = "100%";
                            message.style.left = "50%";
                            message.style.transform = "translateX(-50%)";
                            message.style.background = "black";
                            message.style.color = "white";
                            message.style.padding = "5px 10px";
                            message.style.borderRadius = "5px";
                            message.style.fontSize = "12px";
                            message.style.fontWeight = "bold";
                            message.style.opacity = "0.9";
                            message.style.whiteSpace = "nowrap";
                            message.style.transition = "opacity 0.5s ease-in-out";

                            // 메시지를 오버레이에 추가
                            target.appendChild(message);

                            // 1.5초 후 메시지 삭제
                            setTimeout(() => {
                                message.style.opacity = "0";
                                setTimeout(() => message.remove(), 500);
                            }, 1500);
                        }
                        document.getElementById("toggleSearch").addEventListener("click", function() {
                            var searchContainer = document.getElementById("search-container");
                            if (searchContainer.style.display === "none") {
                                searchContainer.style.display = "block";
                            } else {
                                searchContainer.style.display = "none";
                            }
                        });
                        document.getElementById("filterSearch").addEventListener("click", function() {
                            var searchContainer = document.getElementById("filter-container");
                            if (searchContainer.style.display === "none") {
                                searchContainer.style.display = "block";
                            } else {
                                searchContainer.style.display = "none";
                            }
                        });
                    });
                } else {
                    console.error("❌ 카카오맵 API가 로드되지 않았습니다. API 키 또는 도메인 등록을 확인하세요.");
                }
            }
        </script>
    